<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Abnel Pradhan â€” Dynamic Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        /* --- NEW: Smooth Scrolling --- */
        html {
            scroll-behavior: smooth;
        }

        /* --- Base Styling --- */
        body {
            font-family: 'Inter', sans-serif;
            /* We use bg-gray-950 in the body tag for the base */
        }

        /* Gradient text for the hero title (Unchanged) */
        .hero h1 {
            background-image: linear-gradient(to right, #a5b4fc, #c084fc, #f0abfc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }

        /* Animated profile picture border (Unchanged) */
        @keyframes rotate-gradient {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .animated-gradient-border {
            position: relative;
        }
        .animated-gradient-border::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: conic-gradient(#a5b4fc, #c084fc, #f0abfc, #a5b4fc);
            animation: rotate-gradient 4s linear infinite;
            z-index: 1;
        }

        /* --- UPDATED: Entrance Animations --- */
        
        /* This is the new "slide down" for the H1 */
        @keyframes slideInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* This is the new "slide up" for the subtitle */
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* This is the original "fade in" for other elements */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Animation classes */
        .animate-slide-in-down {
            animation: slideInDown 0.6s ease-out 0.2s backwards;
        }
        .animate-slide-in-up {
            animation: slideInUp 0.6s ease-out 0.4s backwards;
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out 0.2s backwards;
        }

        /* NEW: Typewriter styles */
        .typewriter {
            white-space: pre; /* preserve spaces */
            display: inline-block;
            vertical-align: middle;
        }
        .typewriter-cursor {
            display: inline-block;
            margin-left: 6px;
            font-weight: 700;
            color: #a78bfa; /* indigo-ish */
            animation: blink 1s steps(1) infinite;
        }
        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* NEW: Skill icons animation */
        .skill-card {
            transition: transform 220ms ease, box-shadow 220ms ease;
        }
        .skill-card:hover {
            transform: translateY(-6px) scale(1.02);
        }
        .skill-icon {
            transition: transform 220ms ease, filter 220ms ease;
            will-change: transform;
        }
        .skill-card:hover .skill-icon {
            transform: scale(1.15);
            filter: drop-shadow(0 10px 20px rgba(167,139,250,0.12));
        }


        /* --- Animated Aurora Background Blobs (Unchanged) --- */
        @keyframes moveBlob1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(40vw, -30vh) scale(1.2); }
            50% { transform: translate(20vw, 20vh) scale(0.8); }
            75% { transform: translate(-30vw, -20vh) scale(1.1); }
        }
        @keyframes moveBlob2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(-30vw, 20vh) scale(1.1); }
            50% { transform: translate(10vw, -40vh) scale(0.9); }
            75% { transform: translate(30vw, 10vh) scale(1.2); }
        }
        @keyframes moveBlob3 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(20vw, 30vh) scale(0.8); }
            50% { transform: translate(-30vw, -10vh) scale(1.2); }
            75% { transform: translate(-10vw, 20vh) scale(1); }
        }

        .aurora-blob {
            position: absolute;
            border-radius: 9999px; /* rounded-full */
            filter: blur(100px); /* Heavy blur for soft edges */
            opacity: 0.4; /* Softer opacity */
            mix-blend-mode: hard-light; /* Blends colors nicely */
        }

        /* Respect reduced motion: hide heavy animations */
        @media (prefers-reduced-motion: reduce) {
            .animate-slide-in-down,
            .animate-slide-in-up,
            .animate-fade-in-up,
            .skill-card,
            .project-card,
            .animated-gradient-border::before,
            .aurora-blob {
                transition: none !important;
                animation: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200 font-sans">

    <div class="aurora-background fixed top-0 left-0 w-full h-full z-[-10] overflow-hidden">
        <div class="aurora-blob w-[500px] h-[500px] bg-indigo-500 top-[10vh] left-[10vw]" style="animation: moveBlob1 20s infinite alternate;"></div>
        <div class="aurora-blob w-[400px] h-[400px] bg-purple-500 top-[40vh] left-[60vw]" style="animation: moveBlob2 25s infinite alternate;"></div>
        <div class="aurora-blob w-[450px] h-[450px] bg-pink-500 top-[60vh] left-[30vw]" style="animation: moveBlob3 18s infinite alternate;"></div>
    </div>

    <header class="sticky top-0 z-50 bg-gray-950/70 backdrop-blur-lg shadow-xl border-b border-indigo-500/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                
                <div class="flex items-center gap-4">
                    <div class="relative w-12 h-12 animated-gradient-border rounded-full p-0.5 overflow-hidden hidden md:block">
                        <img 
                            src="profile.jpg" 
                            alt="Abnel Pradhan" 
                            class="w-full h-full rounded-full object-cover relative z-10"
                            onerror="this.src='https://placehold.co/100x100/1e1b4b/a5b4fc?text=AP'"
                        >
                    </div>
                    <a class="text-2xl font-bold text-white hover:text-indigo-400 transition duration-300" href="#">
                        Abnel Pradhan
                    </a>
                </div>

                <nav class="hidden md:flex space-x-8" id="main-nav-desktop">
                    <a href="#home" class="text-gray-300 hover:text-indigo-400 transition duration-300 font-medium">Home</a>
                    <a href="#projects" class="text-gray-300 hover:text-indigo-400 transition duration-300 font-medium">Projects</a>
                    <a href="#skills" class="text-gray-300 hover:text-indigo-400 transition duration-300 font-medium">Skills</a>
                    <a href="#chatbot" class="text-gray-300 hover:text-indigo-400 transition duration-300 font-medium">AI Assistant ðŸ’¬</a>
                    <a href="#contact" class="text-gray-300 hover:text-indigo-400 transition duration-300 font-medium">Contact</a>
                </nav>

                <div class="hidden md:flex items-center gap-4 ml-6">
                    <a href="https://github.com/abnel-pradhan" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="text-gray-300 hover:text-white transition transform hover:scale-110">
                        <img src="https://cdn.simpleicons.org/github/ffffff" alt="GitHub" class="w-5 h-5" />
                    </a>
                    <a href="https://www.instagram.com/abnel_pradhan08?igsh=ZGh5cGVzaDhqbmox" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="text-gray-300 hover:text-white transition transform hover:scale-110">
                        <img src="https://cdn.simpleicons.org/instagram/e4405f" alt="Instagram" class="w-5 h-5" />
                    </a>
                    <a href="https://www.facebook.com/share/1Bdgp8hX6u/" target="_blank" rel="noopener noreferrer" aria-label="Facebook" class="text-gray-300 hover:text-white transition transform hover:scale-110">
                        <img src="https://cdn.simpleicons.org/facebook/1877f2" alt="Facebook" class="w-5 h-5" />
                    </a>
                </div>

                <button class="md:hidden text-white focus:outline-none" id="mobile-menu-button" aria-label="Toggle menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>

        <div class="md:hidden hidden bg-gray-900/90 backdrop-blur-md" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition duration-300">Home</a>
                <a href="#projects" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition duration-300">Projects</a>
                <a href="#skills" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition duration-300">Skills</a>
                <a href="#chatbot" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition duration-300">AI Assistant ðŸ’¬</a>
                <a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition duration-300">Contact</a>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="hero min-h-screen flex items-center justify-center text-center p-4 border-b border-gray-700/50">
            <div class="hero-inner max-w-4xl space-y-6">
                <h1 class="text-6xl sm:text-7xl lg:text-8xl animate-slide-in-down">
                    <span id="hero-title" class="typewriter"></span><span class="typewriter-cursor" id="cursor-title">|</span>
                </h1>
                <p class="subtitle text-xl sm:text-2xl text-gray-300 font-light animate-slide-in-up">
                    <span id="hero-sub" class="typewriter"></span><span class="typewriter-cursor" id="cursor-sub">|</span>
                </p>
                <div class="pt-6 flex justify-center space-x-4 animate-fade-in-up" style="animation-delay: 0.6s;">
                    <a class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transform hover:scale-105 transition duration-300" href="#projects">
                        View Projects
                    </a>
                    <a class="px-6 py-3 border border-gray-400 text-gray-200 font-semibold rounded-full shadow-lg hover:bg-gray-700 transform hover:scale-105 transition duration-300" href="#contact">
                        Let's Talk
                    </a>
                </div>
            </div>
        </section>

        <section id="projects" class="py-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-extrabold text-white text-center mb-12 animate-fade-in-up">Recent Projects</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">

                    <article class="project-card bg-white/5 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden hover:shadow-indigo-500/50 transition duration-500 transform hover:-translate-y-1 border border-white/10 animate-fade-in-up" 
                             data-project-title="E-Commerce Platform" data-project-desc="A full-stack application demonstrating product management, user authentication, and a smooth checkout flow."
                             style="animation-delay: 0.2s;">
                        <div class="p-6 space-y-4">
                            <h3 class="text-2xl font-bold text-indigo-400">E-Commerce Platform</h3>
                            <p class="text-gray-300">A full-stack application demonstrating product management, user authentication, and a smooth checkout flow.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-indigo-900/70 text-indigo-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">React</span>
                                <span class="bg-indigo-900/70 text-indigo-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Node.js</span>
                                <span class="bg-indigo-900/70 text-indigo-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">MongoDB</span>
                            </div>
                            <a href="#" class="inline-flex items-center text-indigo-400 hover:text-indigo-300 font-medium transition duration-300">
                                View Live Demo &rarr;
                            </a>
                        </div>
                    </article>

                    <article class="project-card bg-white/5 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden hover:shadow-purple-500/50 transition duration-500 transform hover:-translate-y-1 border border-white/10 animate-fade-in-up" 
                             data-project-title="Real-time Chat App" data-project-desc="Built a low-latency chat application using WebSockets for instant messaging between users."
                             style="animation-delay: 0.4s;">
                        <div class="p-6 space-y-4">
                            <h3 class="text-2xl font-bold text-purple-400">Real-time Chat App</h3>
                            <p class="text-gray-300">Built a low-latency chat application using WebSockets for instant messaging between users.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-purple-900/70 text-purple-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Vue.js</span>
                                <span class="bg-purple-900/70 text-purple-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Socket.IO</span>
                                <span class="bg-purple-900/70 text-purple-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Express</span>
                            </div>
                            <a href="#" class="inline-flex items-center text-purple-400 hover:text-purple-300 font-medium transition duration-300">
                                View Code &rarr;
                            </a>
                        </div>
                    </article>

                    <article class="project-card bg-white/5 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden hover:shadow-pink-500/50 transition duration-500 transform hover:-translate-y-1 border border-white/10 animate-fade-in-up" 
                             data-project-title="Data Visualization Dashboard" data-project-desc="A clean dashboard that visualizes complex datasets using D3.js for interactive charts."
                             style="animation-delay: 0.6s;">
                        <div class="p-6 space-y-4">
                            <h3 class="text-2xl font-bold text-pink-400">Data Visualization Dashboard</h3>
                            <p class="text-gray-300">A clean dashboard that visualizes complex datasets using D3.js for interactive charts.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-pink-900/70 text-pink-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">HTML/CSS/JS</span>
                                <span class="bg-pink-900/70 text-pink-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">D3.js</span>
                                <span class="bg-pink-900/70 text-pink-300 text-xs font-semibold px-2.5 py-0.5 rounded-full">Tailwind</span>
                            </div>
                            <a href="#" class="inline-flex items-center text-pink-400 hover:text-pink-300 font-medium transition duration-300">
                                View Case Study &rarr;
                            </a>
                        </div>
                    </article>

                </div>
            </div>
        </section>

        <section id="skills" class="py-20 border-t border-gray-700/50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-extrabold text-white text-center mb-12 animate-fade-in-up">My Core Skills</h2>
                <div class="flex flex-wrap justify-center gap-4" id="skill-list">
                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="JavaScript (ES6+)" style="animation-delay: 0.1s;">
                        <img src="https://cdn.simpleicons.org/javascript/f7df1e" alt="JavaScript" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'JS')" />
                        <p class="mt-2 text-sm font-medium text-white">JavaScript</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="React & Next.js" style="animation-delay: 0.2s;">
                        <div class="flex items-center gap-2">
                            <img src="https://cdn.simpleicons.org/react/61dafb" alt="React" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'React')" />
                            <div class="w-10 h-10 flex items-center justify-center rounded-full bg-white/10">
                                <img src="https://cdn.simpleicons.org/nextdotjs/000000" alt="Next.js" class="skill-icon w-8 h-8 object-contain" onerror="handleIconError(this, 'Next')" />
                            </div>
                        </div>
                        <p class="mt-2 text-sm font-medium text-white">React Â· Next.js</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="Tailwind CSS" style="animation-delay: 0.3s;">
                        <img src="https://cdn.simpleicons.org/tailwindcss/06b6d4" alt="Tailwind CSS" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'TW')" />
                        <p class="mt-2 text-sm font-medium text-white">Tailwind CSS</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="Node.js & Express" style="animation-delay: 0.4s;">
                        <div class="flex items-center gap-2">
                            <img src="https://cdn.simpleicons.org/nodedotjs/339933" alt="Node.js" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'Node')" />
                            <div class="w-12 h-12 flex items-center justify-center rounded-full bg-white/10">
                                <img src="https://cdn.simpleicons.org/express/000000" alt="Express" class="skill-icon w-10 h-10 object-contain" onerror="handleIconError(this, 'Express')" />
                            </div>
                        </div>
                        <p class="mt-2 text-sm font-medium text-white">Node.js Â· Express</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="SQL/NoSQL Databases" style="animation-delay: 0.5s;">
                        <div class="flex items-center gap-2">
                            <img src="https://cdn.simpleicons.org/mongodb/47a248" alt="MongoDB" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'MDB')" />
                            <img src="https://cdn.simpleicons.org/postgresql/336791" alt="PostgreSQL" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'PG')" />
                        </div>
                        <p class="mt-2 text-sm font-medium text-white">MongoDB Â· PostgreSQL</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="Git & DevOps" style="animation-delay: 0.6s;">
                        <div class="flex items-center gap-2">
                            <img src="https://cdn.simpleicons.org/git/f05032" alt="Git" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'Git')" />
                            <img src="https://cdn.simpleicons.org/docker/2496ed" alt="Docker" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'Docker')" />
                        </div>
                        <p class="mt-2 text-sm font-medium text-white">Git Â· Docker</p>
                    </div>

                    <div class="skill-card bg-white/10 backdrop-blur-sm p-4 rounded-lg shadow-lg border border-white/10 transition duration-300 hover:border-indigo-400 animate-fade-in-up flex flex-col items-center" data-skill="Web development" style="animation-delay: 0.7s;">
                        <div class="flex items-center gap-2">
                            <img src="https://cdn.simpleicons.org/html5/e34f26" alt="HTML5" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'HTML')" />
                            <img src="https://cdn.simpleicons.org/css3/1572b6" alt="CSS3" class="skill-icon w-12 h-12 object-contain" onerror="handleIconError(this, 'CSS')" />
                        </div>
                        <p class="mt-2 text-sm font-medium text-white">HTML Â· CSS Â· JS</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="chatbot" class="py-20 border-t border-gray-700/50">
            <div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-extrabold text-white text-center mb-10 animate-fade-in-up">AI Assistant ðŸ’¬</h2>
                <p class="text-center text-gray-300 mb-8 animate-fade-in-up" style="animation-delay: 0.2s;">
                    Chat with an AI about Abnel's skills and projects to learn more about my background.
                </p>

                <div class="bg-white/5 backdrop-blur-md rounded-2xl shadow-2xl border border-white/10 flex flex-col h-[500px] animate-fade-in-up" style="animation-delay: 0.4s;">
                    
                    <div id="chat-window" class="flex-grow overflow-y-auto p-4 space-y-4">
                        </div>

                    <div class="p-4 border-t border-white/10 flex">
                        <input id="chat-input" type="text" placeholder="Ask about my skills or projects..." class="flex-grow px-4 py-2 bg-white/10 border border-white/20 rounded-l-lg text-white focus:ring-indigo-500 focus:border-indigo-500 placeholder-gray-400" />
                        <button id="send-btn" class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-r-lg hover:bg-indigo-700 transition duration-300 disabled:opacity-50" type="button">
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 border-t border-gray-700/50">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-extrabold text-white text-center mb-10 animate-fade-in-up">Get in Touch</h2>
                <p class="text-center text-gray-300 mb-8 animate-fade-in-up" style="animation-delay: 0.2s;">Ready to start a project? Send me a message, and I'll get back to you as soon as possible.</p>

                <form id="contactForm" name="contact" method="POST" data-netlify="true" novalidate class="space-y-6 bg-white/5 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/10 animate-fade-in-up" style="animation-delay: 0.4s;">
                    
                    <input type="hidden" name="form-name" value="contact" />

                    <div class="form-row">
                        <label for="name" class="block text-sm font-medium text-gray-200 mb-1">Name</label>
                        <input id="name" name="name" type="text" required class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-indigo-500 focus:border-indigo-500" />
                    </div>
                    <div class="form-row">
                        <label for="email" class="block text-sm font-medium text-gray-200 mb-1">Email</label>
                        <input id="email" name="email" type="email" required class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-indigo-500 focus:border-indigo-500" />
                    </div>
                    <div class="form-row">
                        <label for="message" class="block text-sm font-medium text-gray-200 mb-1">Message</label>
                        <textarea id="message" name="message" rows="5" required class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between pt-2">
                        <button class="w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition duration-300" type="submit">
                            Send Message
                        </button>
                        <span id="formFeedback" role="status" aria-live="polite" class="mt-4 sm:mt-0 text-green-400 font-medium"></span>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <footer class="bg-transparent border-t border-indigo-700/50 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400">
            <p>Â© <span id="year"></span> Abnel Pradhan â€” All rights reserved</p>
        </div>
    </footer>

    <script>
        // --- API Configuration Removed ---
        // We call our own secure Netlify Function.

        // Global state variables
        let chatHistory = [];
        let botIsTyping = false;
        let userSkills = [];
        let userProjects = [];
        let SYSTEM_INSTRUCTION_BASE = ""; // Will be set during DOMContentLoaded

        /**
         * Simple exponential backoff retry mechanism.
         * @param {function} fn - The async function to retry.
         * @param {number} retries - Number of retries.
         * @param {number} delay - Initial delay in ms.
         */
        async function fetchWithBackoff(fn, retries = 3, delay = 1000) {
            let lastError;
            for (let i = 0; i < retries; i++) {
                try {
                    return await fn();
                } catch (error) {
                    lastError = error;
                    if (error.status === 429 || error.status >= 500) {
                        // Only retry on rate limiting or server errors
                        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));
                    } else {
                        // Don't retry on other errors (e.g., 400 Bad Request)
                        throw error;
                    }
                }
            }
            throw lastError;
        }

        /**
         * Creates and displays a message bubble in the chat window.
         * @param {string} sender - 'user' or 'model'.
         * @param {string} text - The message content.
         */
        function displayMessage(sender, text) {
            const chatWindow = document.getElementById('chat-window');
            const messageContainer = document.createElement('div');
            
            const isTypingIndicator = text === 'typing';

            // --- NEW: Added Markdown/HTML Escaping ---
            function escapeHtml(unsafe) {
                if (!unsafe) return '';
                return unsafe
                     .replace(/&/g, '&amp;')
                     .replace(/</g, '&lt;')
                     .replace(/>/g, '&gt;')
                     .replace(/"/g, '&quot;')
                     .replace(/'/g, '&#039;');
            }

            function renderMarkdown(md) {
                if (!md) return '';
                let s = escapeHtml(md);
                s = s.replace(/`([^`]+?)`/g, '<code>$1</code>');
                s = s.replace(/\[([^\]]+?)\]\((https?:\/\/[^)]+?)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
                s = s.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
                s = s.replace(/__(.+?)__/g, '<strong>$1</strong>');
                s = s.replace(/\*(.+?)\*/g, '<em>$1</em>');
                s = s.replace(/_(.+?)_/g, '<em>$1</em>');
                s = s.replace(/\n/g, '<br>');
                return s;
            }
            // --- End of new functions ---

            if (sender === 'user') {
                messageContainer.className = 'flex justify-end';
                messageContainer.innerHTML = `
                    <div class="bg-indigo-600 text-white max-w-xs md:max-w-md lg:max-w-lg p-3 rounded-xl rounded-br-none shadow-md">
                        ${renderMarkdown(text)} 
                    </div>
                `;
            } else {
                messageContainer.className = 'flex justify-start';
                if (isTypingIndicator) {
                    messageContainer.id = 'typing-indicator';
                    messageContainer.innerHTML = `
                        <div class="bg-gray-700/70 text-gray-300 p-3 rounded-xl rounded-tl-none shadow-md">
                            <div class="flex items-center space-x-1">
                                <div class="w-2 h-2 bg-indigo-400 rounded-full animate-bounce delay-75"></div>
                                <div class="w-2 h-2 bg-indigo-400 rounded-full animate-bounce delay-150"></div>
                                <div class="w-2 h-2 bg-indigo-400 rounded-full animate-bounce delay-300"></div>
                            </div>
                        </div>
                    `;
                } else {
                    messageContainer.innerHTML = `
                        <div class="bg-gray-700/70 text-gray-200 max-w-xs md:max-w-md lg:max-w-lg p-3 rounded-xl rounded-tl-none shadow-md">
                            ${renderMarkdown(text)}
                        </div>
                    `;
                }
            }

            chatWindow.appendChild(messageContainer);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * Removes the 'typing' indicator from the chat window.
         */
        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // --- NEW: Added Icon Error Fallback ---
        function handleIconError(imgEl, label) {
            try {
                const fallback = document.createElement('div');
                fallback.className = 'w-12 h-12 flex items-center justify-center bg-white/10 rounded-md text-xs font-semibold text-white';
                fallback.textContent = label;
                imgEl.replaceWith(fallback);
            } catch (e) {
                imgEl.style.display = 'none';
            }
        }

        /**
         * Handles the sending of a user message and getting the AI response.
         * (This uses the working Netlify Function logic)
         */
        async function handleSendMessage() {
            if (botIsTyping) return;

            const chatInput = document.getElementById('chat-input');
            const sendBtn = document.getElementById('send-btn');
            const userText = chatInput.value.trim();

            if (userText === '') return;

            chatInput.value = '';
            sendBtn.disabled = true;
            chatInput.disabled = true;
            botIsTyping = true;

            displayMessage('user', userText);
            chatHistory.push({ role: 'user', parts: [{ text: userText }] });

            displayMessage('model', 'typing');

            const payload = {
                contents: chatHistory,
                systemInstruction: {
                    parts: [{ text: SYSTEM_INSTRUCTION_BASE }]
                },
            };

            try {
                // This is the working API call to our Netlify Function
                const apiCall = async () => {
                    const response = await fetch("/.netlify/functions/chat", { 
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        const error = new Error(`HTTP error! status: ${response.status} ${errorBody}`);
                        error.status = response.status;
                        throw error;
                    }
                    return response.json();
                };

                const result = await fetchWithBackoff(apiCall);
                
                const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                removeTypingIndicator(); 

                if (generatedText) {
                    displayMessage('model', generatedText);
                    chatHistory.push({ role: 'model', parts: [{ text: generatedText }] });
                } else {
                    const errorText = result.error || 'I apologize, I ran into an issue and cannot answer that right now.';
                    displayMessage('model', errorText);
                }

            } catch (error) {
                console.error("Chat Error:", error);
                removeTypingIndicator();
                displayMessage('model', 'An error occurred while connecting to the AI service. Please try again.');
            } finally {
                sendBtn.disabled = false;
                chatInput.disabled = false;
                chatInput.focus();
                botIsTyping = false;
            }
        }

        // --- Main DOM Content Loaded Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Standard initialization
            document.getElementById('year').textContent = new Date().getFullYear();
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const contactForm = document.getElementById('contactForm');
            const navLinks = document.querySelectorAll('#main-nav-desktop a, #mobile-menu a'); // Select all nav links
            const chatInput = document.getElementById('chat-input');
            const sendBtn = document.getElementById('send-btn');

            // 2. Extract Skills and Projects for Chat Context
            const skillElements = document.querySelectorAll('#skill-list [data-skill]');
            userSkills = Array.from(skillElements).map(el => el.getAttribute('data-skill'));

            const projectElements = document.querySelectorAll('.project-card');
            userProjects = Array.from(projectElements).map(el => ({
                title: el.getAttribute('data-project-title'),
                desc: el.getAttribute('data-project-desc')
            }));
            
            // 3. System Instruction
            const skillList = userSkills.join(', ');
            const projectList = userProjects.map(p => `${p.title}: ${p.desc}`).join(' | ');
            
            SYSTEM_INSTRUCTION_BASE = `You are a friendly and professional AI Assistant for Abnel Pradhan's portfolio. Your goal is to answer questions about Abnel's skills and projects.
            
            ---
            **Abnel's Skills:** ${skillList}
            **Abnel's Projects:** ${projectList}
            ---
            
            Respond concisely and only use information related to Abnel's provided skills and projects. If a question is off-topic, politely redirect the user back to the portfolio content.`;


            // 4. Set up Chat Bot greeting
            const greeting = `Hello! I'm Abnel's AI Assistant. I can tell you more about Abnel's skills (like **${userSkills[0]}** or **${userSkills[2]}**) and projects (like the **${userProjects[0].title}**). What would you like to know?`;
            displayMessage('model', greeting);
            chatHistory.push({ role: 'model', parts: [{ text: greeting }] });
            
            // 5. Chat Bot Event Listeners
            if (sendBtn) {
                sendBtn.addEventListener('click', handleSendMessage);
            }
            if (chatInput) {
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSendMessage();
                    }
                });
            }

            // 6. Mobile Menu Listeners
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // --- NEW: GSAP Page Transitions for Nav Links ---
            function pageTransitionTo(hash) {
                const mainEl = document.querySelector('main');
                return new Promise((resolve) => {
                    gsap.to(mainEl, { duration: 0.45, y: 20, opacity: 0, ease: 'power1.inOut', onComplete: () => {
                        if (hash) {
                            const target = document.querySelector(hash);
                            if (target) target.scrollIntoView({ behavior: 'auto', block: 'start' });
                            try { history.pushState(null, '', hash); } catch (e) {}
                        } else {
                            window.scrollTo({ top: 0, behavior: 'auto' });
                        }
                        gsap.fromTo(mainEl, { y: 20, opacity: 0 }, { duration: 0.45, y: 0, opacity: 1, ease: 'power1.inOut', onComplete: resolve });
                    }});
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const href = link.getAttribute('href');
                    const hash = href && href.startsWith('#') ? href : null;

                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }

                    if (hash) {
                        e.preventDefault();
                        pageTransitionTo(hash);
                    }
                });
            });
            // --- End of new nav logic ---

            // 7. Contact Form Listener (This is the working Netlify AJAX submission)
            if (contactForm) {
                contactForm.addEventListener('submit', function(event) {
                    event.preventDefault(); // Stop default HTML submission

                    const form = event.target;
                    const feedback = document.getElementById('formFeedback');

                    if (!form.checkValidity()) {
                        feedback.textContent = 'Please fill out all required fields correctly.';
                        feedback.classList.add('text-red-400');
                        feedback.classList.remove('text-green-400');
                        return;
                    }

                    const formData = new FormData(form);
                    
                    fetch("/", {
                        method: "POST",
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: new URLSearchParams(formData).toString()
                    })
                    .then(() => {
                        feedback.textContent = 'Thank you, your message has been sent!';
                        feedback.classList.add('text-green-400');
                        feedback.classList.remove('text-red-400');

                        setTimeout(() => {
                            form.reset();
                            feedback.textContent = '';
                        }, 3000);
                    })
                    .catch((error) => {
                        feedback.textContent = 'Error sending message. Please try again.';
                        feedback.classList.add('text-red-400');
                        feedback.classList.remove('text-green-400');
                        console.error('Form submission error:', error);
                    });
                });
            }

            // --- NEW: Typewriter animation for hero title + subtitle ---
            function typeText(element, text, speed = 50) {
                return new Promise((resolve) => {
                    let i = 0;
                    element.textContent = '';
                    const timer = setInterval(() => {
                        element.textContent += text.charAt(i);
                        i++;
                        if (i >= text.length) {
                            clearInterval(timer);
                            resolve();
                        }
                    }, speed);
                });
            }

            async function runHeroTypewriter() {
                const titleEl = document.getElementById('hero-title');
                const subEl = document.getElementById('hero-sub');
                const cursorTitle = document.getElementById('cursor-title');
                const cursorSub = document.getElementById('cursor-sub');

                if (!titleEl || !subEl) return;

                const titleText = "Hi, I'm Abnel.";
                const subText = "Welcome to my portfolio. BCA student skilled in coding, video editing, and creative AI tools.";

                // hide the slide-in initial classes to avoid conflict
                titleEl.closest('h1').classList.remove('animate-slide-in-down');
                subEl.closest('p').classList.remove('animate-slide-in-up');

                await typeText(titleEl, titleText, 70);
                if (cursorTitle) cursorTitle.style.display = 'none';
                await new Promise(r => setTimeout(r, 300));
                await typeText(subEl, subText, 30);
                if (cursorSub) cursorSub.style.display = 'none';
            }

            // --- NEW: Scroll-triggered animations (IntersectionObserver + GSAP) ---
            function setupScrollAnimations() {
                const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (prefersReduced) return;

                // Set initial state for all animated elements
                gsap.set('.animate-fade-in-up, .project-card, .skill-card', { y: 20, opacity: 0 });

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const el = entry.target;
                            // Use the delay from the style attribute, or default to 0.2s
                            const delay = parseFloat(el.style.animationDelay || '0.2s') || 0.2;
                            
                            gsap.to(el, { 
                                y: 0, 
                                opacity: 1, 
                                duration: 0.6, 
                                delay: delay, 
                                ease: 'power1.out', 
                                overwrite: true 
                            });
                            observer.unobserve(el);
                        }
                    });
                }, { threshold: 0.15 });

                const targets = document.querySelectorAll('.animate-fade-in-up, .project-card, .skill-card');
                targets.forEach(el => {
                    observer.observe(el);
                });
            }

            // Start animations
            setupScrollAnimations();
            runHeroTypewriter();
        });
    </script>
</body>
</html>
